<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition>
	<h:form id="menuForm">
		<header class="topbar">
			<nav class="topbar-nav">
			<h:panelGroup rendered="#{gerBean.responsavelLogado}">
				<a href="#{request.contextPath}/restrito/indexAdmin.xhtml"
					class="topbar-brand"> <i class="fa-solid fa-car-on"></i>
					Lavagem Daniel
				</a>
			</h:panelGroup>	
			
			<h:panelGroup rendered="#{gerBean.clienteLogado}">
				<a href="#{request.contextPath}/restritoCliente/indexCliente.xhtml"
					class="topbar-brand"> <i class="fa-solid fa-car-on"></i>
					Lavagem Daniel
				</a>
			</h:panelGroup>	

				<button type="button" class="topbar-toggle" id="mobile-menu-button"
					aria-controls="topbar-menu" aria-expanded="false">
					<i class="pi pi-bars"></i>
				</button>

				<div class="topbar-menu" id="topbar-menu">
					<h:panelGroup rendered="#{gerBean.responsavelLogado}"
						layout="block" styleClass="topbar-nav-main">
						<ul class="topbar-nav-list">
							<li class="nav-item"><h:link outcome="/restrito/indexAdmin"
									styleClass="nav-link">
									<i class="pi pi-home"></i> Home
								</h:link></li>

							<li class="nav-item dropdown"><a href="#"
								class="nav-link dropdown-toggle"> <i class="pi pi-folder"></i>
									Cadastros
							</a>
								<div class="dropdown-menu">
									<h:link outcome="/restrito/cadastros/cliente"
										styleClass="dropdown-item">
										<i class="pi pi-users"></i> Clientes </h:link>
									<h:link outcome="/restrito/cadastros/veiculo"
										styleClass="dropdown-item">
										<i class="pi pi-car"></i> Veículos </h:link>
									<h:link outcome="/restrito/cadastros/tipoServico"
										styleClass="dropdown-item">
										<i class="pi pi-tags"></i> Tipos de Serviço </h:link>
									<h:link outcome="/restrito/cadastros/cadastroServico"
										styleClass="dropdown-item">
										<i class="pi pi-briefcase"></i> Serviços </h:link>
									<h:link outcome="/restrito/cadastros/agendamento"
										styleClass="dropdown-item">
										<i class="pi pi-calendar"></i> Agendamento </h:link>
								</div></li>
							<li class="nav-item dropdown"><a href="#"
								class="nav-link dropdown-toggle"> <i class="pi pi-chart-bar"></i>
									Controles
							</a>
								<div class="dropdown-menu">
									<h:link outcome="/restrito/consultas/consultaServico"
										styleClass="dropdown-item">
										<i class="pi pi-briefcase"></i> Serviços </h:link>

									<h:link outcome="/restrito/consultas/consultaAgendamento"
										styleClass="dropdown-item">
										<i class="pi pi-calendar"></i> Agendamentos </h:link>
								</div></li>
								
							<li class="nav-item"><h:link outcome="/restrito/consultas/agenda"
									styleClass="nav-link">
									<i class="pi pi-calendar"></i> Agenda
								</h:link></li>	
						</ul>
					</h:panelGroup>

					<h:panelGroup rendered="#{gerBean.clienteLogado}" layout="block"
						styleClass="topbar-nav-main">
						<ul class="topbar-nav-list">
							<li class="nav-item"><h:link
									outcome="/restritoCliente/indexCliente" styleClass="nav-link">
									<i class="pi pi-calendar"></i> Agendamentos
								</h:link></li>

							<li class="nav-item"><h:link
									outcome="/restritoCliente/minhaConta" styleClass="nav-link">
									<i class="pi pi-user"></i> Minha Conta
								</h:link></li>
						</ul>
					</h:panelGroup>

					<div class="topbar-nav-user">
						<h:panelGroup
							rendered="#{not gerBean.responsavelLogado and not gerBean.clienteLogado}">
							<p:commandButton value="Entrar / Cadastrar-se"
								action="#{loginBean.redirecionarParaLogin}" ajax="false"
								styleClass="ui-button-login" />
						</h:panelGroup>

						<h:panelGroup id="userPanel" rendered="#{gerBean.responsavelLogado}"
							styleClass="user-info-group" layout="block">
							<h:outputLink id="userLink" styleClass="user-name"
								onclick="PF('userMenu').toggle(this);return false;">
								<i class="pi pi-user"></i>
								<p:outputLabel
									value="#{usuarioLogadoBean.responsavelLogado.resNome}" />
							</h:outputLink>

							<p:overlayPanel widgetVar="userMenu" for="userLink"
								my="right top" at="right bottom" showEffect="fade"
								hideEffect="fade" styleClass="user-overlaypanel">
								<p:menu>
									<p:menuitem value="Sair" icon="pi pi-sign-out"
										action="#{gerBean.logout}" ajax="false" />
								</p:menu>
							</p:overlayPanel>
						</h:panelGroup>

						<h:panelGroup id="userPanelCliente" rendered="#{gerBean.clienteLogado}"
							styleClass="user-info-group" layout="block">
							<h:outputLink id="userLinkCliente" styleClass="user-name"
								onclick="PF('userMenuCliente').toggle(this);return false;">
								<i class="pi pi-user"></i>
								<p:outputLabel
									value="#{usuarioLogadoBean.clienteLogado.cliNome}" />
							</h:outputLink>

							<p:overlayPanel widgetVar="userMenuCliente" for="userLinkCliente"
								my="right top" at="right bottom" showEffect="fade"
								hideEffect="fade" styleClass="user-overlaypanel">
								<p:menu>
									<p:menuitem value="Sair" icon="pi pi-sign-out"
										action="#{gerBean.logout}" ajax="false" />
								</p:menu>
							</p:overlayPanel>
						</h:panelGroup>
					</div>
				</div>
			</nav>
		</header>

		<script type="text/javascript">
			//<![CDATA[
			    document.addEventListener('DOMContentLoaded', function () {
			        const mobileMenuButton = document.getElementById('mobile-menu-button');
			        const topbarMenu = document.getElementById('topbar-menu');
			        const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
			
			        // Toggle mobile menu
			        if (mobileMenuButton) {
			            mobileMenuButton.addEventListener('click', () => {
			                topbarMenu.classList.toggle('active');
			            });
			        }
			        
			        // Handle dropdowns, especially for mobile view
			        dropdownToggles.forEach(toggle => {
			            toggle.addEventListener('click', function(event) {
			                // Prevent link from navigating on click
			                event.preventDefault();
			                
			                // For smaller screens, toggle an 'active' class to show/hide the dropdown
			                if (window.innerWidth <= 992) {
			                    const parentDropdown = this.closest('.dropdown');
			                    if (parentDropdown) {
			                        parentDropdown.classList.toggle('active');
			                    }
			                }
			            });
			        });
			    });
			//]]>
			</script>
	</h:form>
</ui:composition>
</html>