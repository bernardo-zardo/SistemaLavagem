<ui:composition template="/templates/pagina.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

	<ui:define name="title">
        Cadastro de Tipo de Serviço
    </ui:define>

	<ui:define name="content">
		<h:form id="form1">
			<p:growl id="mensagem" />

			<p:panel header="Tipo de Serviço" id="painelTipoServico"
				styleClass="painel-custom-header">

				<p:panelGrid columns="2" layout="grid">
					<p:panelGrid columns="1" layout="grid">
						<p:panelGrid columns="2" layout="grid" style="margin-left:-10px">
							<h:panelGroup>
								<p:outputLabel value="Código" for="codigo" />
								<br />
								<p:inputText id="codigo" style="width: 100px"
									value="#{tipoServicoBean.crudObj.tsIdTipoServico}"
									disabled="true" />
							</h:panelGroup>
						</p:panelGrid>

						<p:panelGrid columns="2" layout="grid" style="margin-left:-10px">
							<h:panelGroup>
								<p:outputLabel value="Nome" for="nome" />
								<p:inputText id="nome" value="#{tipoServicoBean.crudObj.tsNome}"
									maxlength="45" style="width:100%" required="true"
									requiredMessage="O campo Nome é obrigatório." />
							</h:panelGroup>
						</p:panelGrid>

						<p:panelGrid columns="2" layout="grid" style="margin-left:-10px">
							<h:panelGroup>
								<p:outputLabel value="Preço (R$)" for="preco" />
								<p:inputNumber id="preco"
									value="#{tipoServicoBean.crudObj.tsPreco}" symbol="R$ "
									decimalPlaces="2" thousandSeparator="." decimalSeparator=","
									style="width:150px" required="true"
									requiredMessage="O campo Preço é obrigatório." />
							</h:panelGroup>
						</p:panelGrid>

					</p:panelGrid>
				</p:panelGrid>
			</p:panel>

			<p:panel styleClass="painel-custom">
				<div align="right">
					<p:commandButton value="Salvar" icon="pi pi-save"
						actionListener="#{tipoServicoBean.salvar()}" process="@form"
						update=":form1:painelTipoServico :form1:tiposServicoTable :form1:mensagem"
						styleClass="btn-acoes ui-button-success" />

					<p:commandButton value="Novo" icon="pi pi-plus"
						actionListener="#{tipoServicoBean.criaObj()}" process="@this"
						update=":form1:painelTipoServico :form1:mensagem"
						styleClass="btn-acoes ui-button-secondary"
						style="margin-left:10px;" />

					<p:commandButton value="Excluir" icon="pi pi-trash"
						actionListener="#{tipoServicoBean.deletar()}" process="@this"
						update=":form1:painelTipoServico :form1:tiposServicoTable :form1:mensagem"
						styleClass="btn-acoes ui-button-danger" style="margin-left:10px;" />
				</div>
			</p:panel>

			<p:panel styleClass="painel-custom-header"
				header="Tipos de Serviço Cadastrados">
				<p:dataTable id="tiposServicoTable" var="tipo" reflow="true"
					sortBy="#{tipo.tsIdTipoServico}" sortOrder="ascending"
					value="#{tipoServicoBean.tiposServico}" paginator="true" rows="10"
					paginatorPosition="bottom" style="margin-top:10px;"
					emptyMessage="Nenhum tipo de serviço encontrado"
					filterEvent="keyup">

					<p:column headerText="Código" width="85"
						sortBy="#{tipo.tsIdTipoServico}"
						filterBy="#{tipo.tsIdTipoServico}">
						<h:outputText value="#{tipo.tsIdTipoServico}" />
					</p:column>

					<p:column headerText="Nome" sortBy="#{tipo.tsNome}"
						filterBy="#{tipo.tsNome}">
						<h:outputText value="#{tipo.tsNome}" />
					</p:column>

					<p:column headerText="Preço (R$)" sortBy="#{tipo.tsPreco}">
						<h:outputText value="#{tipo.tsPreco}">
							<f:convertNumber type="currency" currencySymbol="R$ "
								maxFractionDigits="2" />
						</h:outputText>
					</p:column>

					<p:column headerText="Ações" width="140">
						<p:commandButton icon="pi pi-pencil"
							action="#{tipoServicoBean.selecionarTipoServico(tipo)}"
							process="@this"
							update=":form1:painelTipoServico :form1:tiposServicoTable :form1:mensagem"
							styleClass="ui-button-success" style="margin-right:5px;" />

						<p:commandButton icon="pi pi-trash" styleClass="ui-button-danger"
							action="#{tipoServicoBean.excluirTipoServico(tipo)}"
							update=":form1:tiposServicoTable :form1:painelTipoServico :form1:mensagem"
							process="@this">
							<p:confirm header="Atenção!"
								message="Você tem certeza que deseja excluir esse registro?"
								icon="pi pi-exclamation-triangle" />
						</p:commandButton>
					</p:column>
				</p:dataTable>

				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					width="350">
					<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
					<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no" icon="pi pi-times" />
				</p:confirmDialog>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>
