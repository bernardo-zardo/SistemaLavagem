<ui:composition template="/templates/pagina.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

	<ui:define name="title">
        Cadastro de Responsável
    </ui:define>

	<ui:define name="content">

		<h:form id="formResp">
			<p:growl id="msgResp" />

			<p:panel header="Cadastro de Responsável" id="painelResp"
				styleClass="painel-custom-header">
				<p:panelGrid columns="2" layout="grid">
					<p:panelGrid columns="1" layout="grid">
						<p:panelGrid columns="2" layout="grid" style="margin-left: -10px">
							<h:panelGroup>
								<p:outputLabel value="Código" for="codigo" />
								<br />
								<p:inputText id="codigo"
									value="#{cadastroResponsavelBean.crudObj.resIdResponsavel}"
									disabled="true" style="width:100px" />
							</h:panelGroup>
						</p:panelGrid>

						<p:panelGrid columns="2" layout="grid" style="margin-left: -10px">
							<h:panelGroup>
								<p:outputLabel value="Nome Completo" for="nome" />
								<p:inputText id="nome"
									value="#{cadastroResponsavelBean.crudObj.resNome}"
									maxlength="50" style="width:100%" />
							</h:panelGroup>

							<h:panelGroup>
								<p:outputLabel value="Telefone" for="telefone" />
								<p:inputMask id="telefone"
									value="#{cadastroResponsavelBean.crudObj.resTelefone}"
									mask="(99) 99999-9999" style="width:100%" />
							</h:panelGroup>
						</p:panelGrid>

						<p:panelGrid columns="2" layout="grid" style="margin-left: -10px">
							<h:panelGroup>
								<p:outputLabel value="CPF" for="cpf" />
								<p:inputMask id="cpf"
									value="#{cadastroResponsavelBean.crudObj.resCpf}"
									mask="999.999.999-99" style="width:100%" />
							</h:panelGroup>

							<h:panelGroup>
								<p:outputLabel value="Senha" for="senha" />
								<p:password id="senha"
									value="#{cadastroResponsavelBean.crudObj.resSenha}"
									style="width:100%" />
							</h:panelGroup>
						</p:panelGrid>
					</p:panelGrid>
				</p:panelGrid>
			</p:panel>

			<p:panel styleClass="painel-custom">
				<div align="right">
					<p:commandButton value="Salvar" icon="pi pi-save" process="@form"
						actionListener="#{cadastroResponsavelBean.salvar}"
						update=":formResp:painelResp :formResp:tabelaResp :formResp:msgResp"
						styleClass="btn-acoes ui-button-success" />

					<p:commandButton value="Novo" icon="pi pi-plus" process="@this"
						actionListener="#{cadastroResponsavelBean.criaObj}"
						update=":formResp:painelResp :formResp:msgResp"
						styleClass="btn-acoes ui-button-secondary" />

					<p:commandButton value="Excluir" icon="pi pi-trash" process="@this"
						actionListener="#{cadastroResponsavelBean.deletar}"
						update=":formResp:painelResp :formResp:tabelaResp :formResp:msgResp"
						styleClass="btn-acoes ui-button-danger">
						<p:confirm header="Atenção!" message="Excluir este responsável?"
							icon="pi pi-exclamation-triangle" />
					</p:commandButton>
				</div>
			</p:panel>

			<p:panel header="Responsáveis Cadastrados"
				styleClass="painel-custom-header">
				<p:dataTable id="tabelaResp" var="r"
					value="#{cadastroResponsavelBean.responsaveis}" paginator="true"
					rows="10" reflow="true" sortBy="#{r.resIdResponsavel}" paginatorPosition="bottom" 
					emptyMessage="Nenhum responsável encontrado">

					<p:column headerText="Código" width="85">
						<h:outputText value="#{r.resIdResponsavel}" />
					</p:column>

					<p:column headerText="Nome">
						<h:outputText value="#{r.resNome}" />
					</p:column>

					<p:column headerText="Telefone" width="125">
						<h:outputText value="#{r.resTelefone}" />
					</p:column>

					<p:column headerText="CPF" width="130">
						<h:outputText value="#{r.resCpf}" />
					</p:column>

					<p:column headerText="Ações" width="140">

						<p:commandButton icon="pi pi-user-edit"
							styleClass="ui-button-success"
							actionListener="#{cadastroResponsavelBean.selecionar(r)}"
							process="@this" update=":formResp:painelResp :formResp:msgResp"
							style="margin-right:5px;" />

						<p:commandButton icon="pi pi-trash" styleClass="ui-button-danger"
							process="@this"
							actionListener="#{cadastroResponsavelBean.excluirResponsavel(r)}"
							update=":formResp:tabelaResp :formResp:msgResp">
							<p:confirm header="Atenção!"
								message="Você tem certeza que deseja excluir?"
								icon="pi pi-exclamation-triangle" />
						</p:commandButton>

					</p:column>
				</p:dataTable>

				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					width="350">
					<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
					<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no" icon="pi pi-times" />
				</p:confirmDialog>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>
